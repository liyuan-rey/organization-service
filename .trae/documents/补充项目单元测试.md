# 补充项目单元测试计划

## 测试范围

为项目补充全面的单元测试，包括以下几个层次：

1. **服务层测试**：`DepartmentServiceTest`
2. **控制器层测试**：`DepartmentControllerTest`
3. **映射器层测试**：`DepartmentMapperTest`
4. **数据访问层测试**：`DepartmentRepositoryTest`

## 测试策略

* 使用JUnit 5作为测试框架

* 使用Mockito进行依赖注入和模拟

* 使用AssertJ进行断言

* 对每个方法进行正向和反向测试

* 测试异常情况

* 遵循测试金字塔原则，确保单元测试覆盖率

## 测试实现

### 1. 服务层测试 (`DepartmentServiceTest`)

测试`DepartmentServiceImpl`的所有方法：

* `getAllDepartments()`：测试获取所有部门

* `getDepartmentById()`：测试根据ID获取部门，包括部门不存在的情况

* `createDepartment()`：测试创建部门

* `updateDepartment()`：测试更新部门，包括部门不存在的情况

* `deleteDepartment()`：测试删除部门，包括部门不存在的情况

### 2. 控制器层测试 (`DepartmentControllerTest`)

测试`DepartmentController`的所有API端点：

* `GET /api/departments`：测试获取所有部门

* `GET /api/departments/{id}`：测试根据ID获取部门

* `POST /api/departments`：测试创建部门

* `PUT /api/departments/{id}`：测试更新部门

* `DELETE /api/departments/{id}`：测试删除部门

### 3. 映射器层测试 (`DepartmentMapperTest`)

测试`DepartmentMapper`的所有映射方法：

* `toEntity()`：测试从创建请求DTO到实体的映射

* `updateEntity()`：测试从更新请求DTO到实体的映射

* `toRsp()`：测试从实体到响应DTO的映射

### 4. 数据访问层测试 (`DepartmentRepositoryTest`)

测试`DepartmentRepository`的主要方法：

* `findAll()`：测试查询所有部门

* `findById()`：测试根据ID查询部门

* `save()`：测试保存部门

* `delete()`：测试删除部门

## 测试文件位置

所有测试文件将按照项目约定的目录结构放置：

```
src/test/java/com/reythecoder/organization/
├── controller/
│   └── DepartmentControllerTest.java
├── mapper/
│   └── DepartmentMapperTest.java
├── repository/
│   └── DepartmentRepositoryTest.java
└── service/
    └── DepartmentServiceTest.java
```

## 预期效果

通过补充
